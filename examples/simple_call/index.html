<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>
    <!-- Include the JS generated by `wasm-pack build` -->
    <script src='liquers_wasm.js'></script>

    <script type=module>
      const { register, register_hello, eval_query } = wasm_bindgen;

      async function run() {
        await wasm_bindgen('./liquers_wasm_bg.wasm');
        register_hello();

        var result = eval_query("world", "hello");
        console.log(`result = ${result}`);

        register("root","alert", function(x){alert(x);});
        result = eval_query("world again", "hello/alert");
        console.log(`result = ${result}`);

        register("root","alert2", function(x,y){alert(x+"; "+y);});
        result = eval_query("world again with parameter", "hello/alert2-PARAMETER");
        console.log(`result = ${result}`);
      }

      run();
    </script>
  </body>
</html>